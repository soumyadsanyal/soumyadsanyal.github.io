<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Soumya D. Sanyal | Articles by Soumya D. Sanyal</title>
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">


    <link rel="stylesheet" href="http://soumyadsanyal.com/theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="http://soumyadsanyal.com/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://soumyadsanyal.com/theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />

</head>
<body>
    <header>
        <nav>
            <ul>

                <li class="ephemeral selected"><a href="http://soumyadsanyal.com/author/soumya-d-sanyal.html">Soumya D. Sanyal</a></li>
                <li><a href="http://soumyadsanyal.com/">About</a></li>
                <li><a href="http://soumyadsanyal.com/pages/write.html">Write</a></li>
                <li><a href="http://soumyadsanyal.com/blog">Blog</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="http://soumyadsanyal.com">Soumya D. Sanyal</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Dec 11, 2017</h4>

            <article class="post">
                <h2 class="title">
                    <a href="http://soumyadsanyal.com/the-unreasonable-effectiveness-of-type-inference.html" rel="bookmark" title="Permanent Link to &quot;The unreasonable effectiveness of type inference&quot;">The unreasonable effectiveness of type inference</a>
                </h2>

                <h5>A self-reminder to learn more about type inference</h5>
<p>On the train back home this Friday, I was doing an exercise implementing list reversal using
folds, and found myself wanting to look up the type of a left fold (I always forget the
exact form).</p>
<p>Remember that a fold is an operation that takes a binary operator <span class="math">\(f\)</span>, an
accumulator value <span class="math">\(acc\)</span>, and a list <span class="math">\(ls\)</span> (or another general recursive data
structure, e.g.: a tree) and processes the list to produce something of the same
type as <span class="math">\(acc\)</span>.</p>
<p>To be more precise, the defining equations for a left fold are:</p>
<blockquote>
<p><code>foldLeft f acc [] = acc</code></p>
</blockquote>
<p>and</p>
<blockquote>
<p><code>foldLeft f acc x:xs = foldLeft f (f acc x) xs</code></p>
</blockquote>
<p>So what are the types of <code>foldLeft</code> and <code>f</code>?</p>
<p>Let's first fix the types of <code>acc</code> and the list we're processing. There are no
constraints on the type of <code>acc</code>; let's assign it type <code>A</code>. </p>
<p>There are also no constraints so far on the type of the list. So, suppose that the list is homogenous of type <code>B</code>, so that the expressions <code>[]</code> and <code>x:xs</code> above are of type <code>[B]</code>. </p>
<p>The second defining equation above constrains the type of <code>f acc x</code> to be the
same as the type of <code>acc</code>. So, we have that <code>f :: A -&gt; B -&gt; A</code>.</p>
<p>This determines the type of <code>foldLeft</code> as follows: we know the types of its
arguments, and it's return value is of type </p>
<blockquote>
<p><code>A == type(acc)</code> </p>
</blockquote>
<p>by the first defining equation. This gives </p>
<blockquote>
<p><code>foldLeft :: (A -&gt; B -&gt; A) -&gt; A -&gt; [B] -&gt; A</code>.</p>
</blockquote>
<p>What about <code>foldRight</code>?</p>
<p>The defining equations for <code>foldRight</code> are:</p>
<blockquote>
<p><code>foldRight f acc [] = acc</code></p>
</blockquote>
<p>and</p>
<blockquote>
<p><code>foldRight f acc x:xs = f x (foldRight f acc xs)</code></p>
</blockquote>
<p>Once again, let's fix the types of the <code>acc</code> and <code>ls</code> arguments as <code>A</code> and <code>[B]</code>
respectively.</p>
<p>Given these, our job is to infer the types of <code>foldRight</code> and <code>f</code>, as generally
as possible.</p>
<p>At a very high level, the type of <code>foldRight</code> is given by the first defining
equation as</p>
<blockquote>
<p><code>foldRight :: (?) -&gt; A -&gt; [B] -&gt; A</code></p>
</blockquote>
<p>where <code>(?)</code> is a placeholder for the type of <code>f</code>.</p>
<p>There's only one hint as to the type of <code>f</code> in the definition, and it's given
by the second defining equation. It shows that <code>f</code> is a binary operator taking
values of type <code>B</code> and the type of an evaluated <code>foldRight</code> expression to the
type of an evaluated <code>foldRight</code> expression (the left hand side).</p>
<p>But by the first defining equation, the type of an evaluated <code>foldRight</code>
expression is just <code>A</code>, even if we don't know the type of <code>f</code> yet.</p>
<p>So, we have </p>
<blockquote>
<p><code>f :: B -&gt; A -&gt; A</code>, </p>
</blockquote>
<p>and therefore</p>
<blockquote>
<p><code>foldRight :: (B -&gt; A -&gt; A) -&gt; A -&gt; [B] -&gt; A</code>.</p>
</blockquote>
<p>It feels both remarkable and unremarkable, both intuitive and unintuitive, that with
only the function signature, and the basic assumption that the recursive types
in question (lists, trees, etc.) are homogenous, we're able to deduce the 
general type of these higher order operations from the defining equations.</p>
<p>On the one hand, it seems very surprising that so much is possible with so
little, especially when you regularly spend time working in programming
languages that are duck-typed, or not strongly typed (looking at you,
Python), where this level of inference is generally not possible. It makes
things like code reviews, and riffing off code that other people have written,
that much harder. You have to work to supply the context and intended use from
other sources - documentation when it exists, or having a quick chat with the
author when possible.</p>
<p>On the other, it seems quite obvious that with expressions as values, equational
reasoning, and type inference, it's relatively easy to resolve types and context
given this much information about a program. In fact, we just did, and it was
pretty easy.</p>
<p>As always, it's important to choose the right tool for the job, but this example
demonstrates in a small way the power of leveraging typing, especially as
projects grow and teams scale.</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
                <div class="clear"></div>

                <div class="info">
                    <a href="http://soumyadsanyal.com/the-unreasonable-effectiveness-of-type-inference.html">posted at 07:00</a>
                    &nbsp;&middot;&nbsp;<a href="http://soumyadsanyal.com/category/blog.html" rel="tag">blog</a>
                </div>
		<a href="http://soumyadsanyal.com/the-unreasonable-effectiveness-of-type-inference.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Dec 10, 2017</h4>

            <article class="post">
                <h2 class="title">
                    <a href="http://soumyadsanyal.com/examples-and-counterexamples.html" rel="bookmark" title="Permanent Link to &quot;Examples and Counterexamples&quot;">Examples and Counterexamples</a>
                </h2>

                <h5>Or, what this blog is about.</h5>
<p>It's not always easy finding a common thread between diverse interests, especially when
you learn new things over time and your interests evolve.</p>
<p>Which is another way of saying that I'm still figuring out what this blog is
really about, and what its range should be.</p>
<p>But for the moment, I think I've settled on the thread of <em>examples and counterexamples</em>.</p>
<p>What makes examples and counterexamples so helpful, and sometimes so beautiful?</p>
<p>A good example can often contain the germ of a really
good idea, illustrating it in a very concrete, accessible way. 
It helps to record the idea's motivating examples, even if the resulting theory becomes very
general and abstract in the end.</p>
<p>A good example, when as simple and succinct as possible, feels like carrying around a really rare gem of an idea in your pocket at all times. It's a powerful, lightweight addition to your problem-solving superpowers. Like playing a knight in a game of chess, a good example illustrates surprisingly many facts, and clarifies your thinking about unexpectedly many ideas and analogies.</p>
<p>A good set of examples pertaining to an idea serves to show you
in precisely what situations an idea will be valid. They demonstrate the idea's <em>range</em> in
simple, memorable and powerful ways.</p>
<p>A good set of counterexamples serves to draw bright lines around your idea,
showing you in which situations your ideas will <em>not</em> apply, where you should feel
confident that this terrain is <em>different</em>, and needs genuinely new techniques. They
protect you from generalizing incorrectly, and keep you from fooling yourself into believing that you're smarter than you actually are. They help you clearly understand the difference between what you know and what you don't know.</p>
<p>Between math, computer science, data science and engineering, statistics, and politics, examples and
counterexamples, especially when simple, constructive and concrete, have always packed the greatest bang for the buck for me.</p>
<p><em>Examples and counterexamples</em> will probably be the common thread
between most of my posts on this blog.</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="http://soumyadsanyal.com/examples-and-counterexamples.html">posted at 07:00</a>
                    &nbsp;&middot;&nbsp;<a href="http://soumyadsanyal.com/category/blog.html" rel="tag">blog</a>
                </div>
		<a href="http://soumyadsanyal.com/examples-and-counterexamples.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Nov 20, 2015</h4>

            <article class="post">
                <h2 class="title">
                    <a href="http://soumyadsanyal.com/hello-world.html" rel="bookmark" title="Permanent Link to &quot;Hello World!&quot;">Hello World!</a>
                </h2>

                <p>This is my first post!</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">assigns</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">theline</span><span class="p">():</span>
        <span class="k">return</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">m</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="n">c</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">theline</span>
</code></pre></div>

<p>This function takes parameters <span class="math">\(m\)</span> and <span class="math">\(c\)</span> and returns a constructor for a linear function <span class="math">\(y=m*x+c\)</span>.</p>
<p>Let's try this out:</p>
<div class="highlight"><pre><span></span><code><span class="n">newline_generator</span><span class="o">=</span><span class="n">assigns</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">theline</span><span class="o">=</span><span class="n">newline_generator</span><span class="p">()</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">theline</span><span class="p">(</span><span class="mi">1100</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="mf">1101</span>
</code></pre></div>

<p>That's all she wrote.</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
                <div class="clear"></div>

                <div class="info">
                    <a href="http://soumyadsanyal.com/hello-world.html">posted at 07:00</a>
                    &nbsp;&middot;&nbsp;<a href="http://soumyadsanyal.com/category/blog.html" rel="tag">blog</a>
                </div>
		<a href="http://soumyadsanyal.com/hello-world.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Nov 20, 2015</h4>

            <article class="post">
                <h2 class="title">
                    <a href="http://soumyadsanyal.com/test_post.html" rel="bookmark" title="Permanent Link to &quot;test_post&quot;">test_post</a>
                </h2>

                <p>Look at <a href="{filename}/pages/first.md">this post</a>.</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="http://soumyadsanyal.com/test_post.html">posted at 06:00</a>
                    &nbsp;&middot;&nbsp;<a href="http://soumyadsanyal.com/category/blog.html" rel="tag">blog</a>
                </div>
		<a href="http://soumyadsanyal.com/test_post.html#disqus_thread">Click to read and post comments</a>
            </article>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/soumyadsanyal/">GitHub</a>
                &middot;
                <a href="https://linkedin.com/in/soumyadsanyal/">LinkedIn</a>
                &middot;
                <a href="https://twitter.com/soumyadsanyal">Twitter</a>
                &middot;
               

                &middot;
		<p>© Copyright 2015 - 2021, Soumya D. Sanyal.</p>





            </footer>
        </div>
        <div class="clear"></div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-72888309-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>